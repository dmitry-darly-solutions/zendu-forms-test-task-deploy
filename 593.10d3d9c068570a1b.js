"use strict";(self.webpackChunkzendu_forms=self.webpackChunkzendu_forms||[]).push([[593],{5593:(Re,L,r)=>{r.r(L),r.d(L,{SubmissionsModule:()=>Ae});var _=r(6895),C=r(9371),t=r(1571),g=r(1135),D=r(9751),y=(r(7579),r(9841)),E=r(3900),f=r(5698),u=r(4004);r(2722);const T=["*"];class m{_clearListeners(){for(const s of this._listeners)s.remove();this._listeners=[]}constructor(s){this._ngZone=s,this._pending=[],this._listeners=[],this._targetStream=new g.X(void 0)}getLazyEmitter(s){return this._targetStream.pipe((0,E.w)(e=>{const i=new D.y(a=>{if(!e)return void this._pending.push({observable:i,observer:a});const o=e.addListener(s,l=>{this._ngZone.run(()=>a.next(l))});if(o)return this._listeners.push(o),()=>o.remove();a.complete()});return i}))}setTarget(s){const e=this._targetStream.value;s!==e&&(e&&(this._clearListeners(),this._pending=[]),this._targetStream.next(s),this._pending.forEach(i=>i.observable.subscribe(i.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}}const v={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},Z="500px",S="500px";let c=(()=>{class n{set center(e){this._center=e}set zoom(e){this._zoom=e}set options(e){this._options=e||v}constructor(e,i,a){if(this._elementRef=e,this._ngZone=i,this._eventManager=new m(this._ngZone),this.height=Z,this.width=S,this._options=v,this.mapInitialized=new t.vpe,this.authFailure=new t.vpe,this.boundsChanged=this._eventManager.getLazyEmitter("bounds_changed"),this.centerChanged=this._eventManager.getLazyEmitter("center_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.headingChanged=this._eventManager.getLazyEmitter("heading_changed"),this.idle=this._eventManager.getLazyEmitter("idle"),this.maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed"),this.mapMousemove=this._eventManager.getLazyEmitter("mousemove"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.projectionChanged=this._eventManager.getLazyEmitter("projection_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.tilesloaded=this._eventManager.getLazyEmitter("tilesloaded"),this.tiltChanged=this._eventManager.getLazyEmitter("tilt_changed"),this.zoomChanged=this._eventManager.getLazyEmitter("zoom_changed"),this._isBrowser=(0,_.NF)(a),this._isBrowser){const o=window;this._existingAuthFailureCallback=o.gm_authFailure,o.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(e){(e.height||e.width)&&this._setSize();const i=this.googleMap;i&&(e.options&&i.setOptions(this._combineOptions()),e.center&&this._center&&i.setCenter(this._center),e.zoom&&null!=this._zoom&&i.setZoom(this._zoom),e.mapTypeId&&this.mapTypeId&&i.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),this._ngZone.runOutsideAngular(()=>{this.googleMap=new google.maps.Map(this._mapEl,this._combineOptions())}),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap))}ngOnDestroy(){this._eventManager.destroy(),this._isBrowser&&(window.gm_authFailure=this._existingAuthFailureCallback)}fitBounds(e,i){this._assertInitialized(),this.googleMap.fitBounds(e,i)}panBy(e,i){this._assertInitialized(),this.googleMap.panBy(e,i)}panTo(e){this._assertInitialized(),this.googleMap.panTo(e)}panToBounds(e,i){this._assertInitialized(),this.googleMap.panToBounds(e,i)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_setSize(){if(this._mapEl){const e=this._mapEl.style;e.height=null===this.height?"":A(this.height)||Z,e.width=null===this.width?"":A(this.width)||S}}_combineOptions(){const e=this._options||{};return{...e,center:this._center||e.center||v.center,zoom:this._zoom??e.zoom??v.zoom,mapTypeId:this.mapTypeId||e.mapTypeId||v.mapTypeId}}_assertInitialized(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.Lbi))},n.\u0275cmp=t.Xpm({type:n,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[t.TTD],ngContentSelectors:T,decls:2,vars:0,consts:[[1,"map-container"]],template:function(e,i){1&e&&(t.F$t(),t._UZ(0,"div",0),t.Hsn(1))},encapsulation:2,changeDetection:0}),n})();const V=/([A-Za-z%]+)$/;function A(n){return null==n?"":V.test(n)?n:`${n}px`}const se={position:{lat:37.421995,lng:-122.084092}};let x=(()=>{class n{set title(e){this._title=e}set position(e){this._position=e}set label(e){this._label=e}set clickable(e){this._clickable=e}set options(e){this._options=e}set icon(e){this._icon=e}set visible(e){this._visible=e}constructor(e,i){this._googleMap=e,this._ngZone=i,this._eventManager=new m(this._ngZone),this.animationChanged=this._eventManager.getLazyEmitter("animation_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.clickableChanged=this._eventManager.getLazyEmitter("clickable_changed"),this.cursorChanged=this._eventManager.getLazyEmitter("cursor_changed"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.draggableChanged=this._eventManager.getLazyEmitter("draggable_changed"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.flatChanged=this._eventManager.getLazyEmitter("flat_changed"),this.iconChanged=this._eventManager.getLazyEmitter("icon_changed"),this.mapMousedown=this._eventManager.getLazyEmitter("mousedown"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.mapMouseup=this._eventManager.getLazyEmitter("mouseup"),this.positionChanged=this._eventManager.getLazyEmitter("position_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.shapeChanged=this._eventManager.getLazyEmitter("shape_changed"),this.titleChanged=this._eventManager.getLazyEmitter("title_changed"),this.visibleChanged=this._eventManager.getLazyEmitter("visible_changed"),this.zindexChanged=this._eventManager.getLazyEmitter("zindex_changed")}ngOnInit(){this._googleMap._isBrowser&&(this._ngZone.runOutsideAngular(()=>{this.marker=new google.maps.Marker(this._combineOptions())}),this._assertInitialized(),this.marker.setMap(this._googleMap.googleMap),this._eventManager.setTarget(this.marker))}ngOnChanges(e){const{marker:i,_title:a,_position:o,_label:l,_clickable:p,_icon:z,_visible:w}=this;i&&(e.options&&i.setOptions(this._combineOptions()),e.title&&void 0!==a&&i.setTitle(a),e.position&&o&&i.setPosition(o),e.label&&void 0!==l&&i.setLabel(l),e.clickable&&void 0!==p&&i.setClickable(p),e.icon&&z&&i.setIcon(z),e.visible&&void 0!==w&&i.setVisible(w))}ngOnDestroy(){this._eventManager.destroy(),this.marker&&this.marker.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_combineOptions(){const e=this._options||se;return{...e,title:this._title||e.title,position:this._position||e.position,label:this._label||e.label,clickable:this._clickable??e.clickable,map:this._googleMap.googleMap,icon:this._icon||e.icon,visible:this._visible??e.visible}}_assertInitialized(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c),t.Y36(t.R0b))},n.\u0275dir=t.lG2({type:n,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged"},exportAs:["mapMarker"],features:[t.TTD]}),n})(),ue=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})(),me=(()=>{class n{constructor(e){this._ngZone=e}geocode(e){return new D.y(i=>{this._geocoder||(this._geocoder=new google.maps.Geocoder),this._geocoder.geocode(e,(a,o)=>{this._ngZone.run(()=>{i.next({results:a||[],status:o}),i.complete()})})})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(t.R0b))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var b=r(3218),_e=r(9300),d=(()=>{return(n=d||(d={})).SUCCESS="Low Risk",n.DANGER="Uncomplete",n.DEFAULT="Unassigned",d;var n})(),R=r(9646),fe=r(262);const k_API_PATH="https://my-json-server.typicode.com/dmitry-darly-solutions/zendu-forms-test-task";var Me=r(529);let P=(()=>{class n{constructor(e){this.http=e,this.API={SUBMISSIONS:"submissions",FORMS:"forms",GOOGLE:"https://maps.googleapis.com/maps/api/js"},this.isGoogleApiLoaded=!1}getSubmissions(e,i){return this.http.get(`${k_API_PATH}/${this.API.SUBMISSIONS}`,{params:{_start:e,_limit:i}}).pipe((0,f.q)(1))}getAllSubmissions(){return this.http.get(`${k_API_PATH}/${this.API.SUBMISSIONS}`).pipe((0,f.q)(1))}getSubmissionsAmount(){return this.getAllSubmissions().pipe((0,u.U)(e=>e.length))}downloadSubmissions(){this.getAllSubmissions().subscribe(e=>{const i=new Blob([JSON.stringify(e)],{type:"application/json"}),a=document.createElement("a"),o=URL.createObjectURL(i);a.href=o,a.download="submissions.json",a.click(),URL.revokeObjectURL(o),a.remove()})}googleApiLoaded(){return this.isGoogleApiLoaded?(0,R.of)(this.isGoogleApiLoaded):this.http.jsonp(`${this.API.GOOGLE}?key=AIzaSyC6oNNM3-cHtC2MX-wFbnGCq20GBCKSwTI`,"callback").pipe((0,u.U)(()=>(this.isGoogleApiLoaded=!0,this.isGoogleApiLoaded)),(0,fe.K)(()=>(0,R.of)(!1)))}getForms(){return this.http.get(`${k_API_PATH}/${this.API.FORMS}`).pipe((0,f.q)(1))}getStatusClass(e){return e===d.SUCCESS?"text-status-green border-status-green bg-status-green-bg":e===d.DANGER?"text-status-red border-status-red":"text-status-gray border-status-grey bg-status-gray-bg"}getStatusMarkClass(e){return e===d.SUCCESS?"bg-status-green":e===d.DANGER?"bg-status-red":"bg-status-gray"}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Me.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var O=r(433);function ye(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"a",22),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.selectedForm=o.title)}),t._uU(1),t.qZA()}if(2&n){const e=s.$implicit;t.xp6(1),t.Oqu(e.title)}}function be(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"a",22),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.selectedStatus=o)}),t._uU(1),t.qZA()}if(2&n){const e=s.$implicit;t.xp6(1),t.Oqu(e)}}const F=function(n){return{"btn-blue-nav text-white":n}};let Ce=(()=>{class n{constructor(e,i){this.router=e,this.submissionsService=i,this.currentTab="",this.forms=[],this.selectedForm="Select Form",this.statuses=[d.SUCCESS,d.DEFAULT,d.DANGER],this.selectedStatus="Select Status",this.date="",this.currentTab=this.router.url.split("/")[2]}ngOnInit(){this.router.events.pipe((0,_e.h)(e=>e instanceof C.m2)).subscribe(()=>{this.currentTab=this.router.url.split("/")[2]}),this.submissionsService.getForms().subscribe(e=>this.forms=e)}export(){this.submissionsService.downloadSubmissions()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.F0),t.Y36(P))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-submissions"]],decls:32,vars:13,consts:[[1,"page-title"],[1,"filter","d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center"],[1,"search"],["src","assets/icons/search.svg",1,"icon-search"],["type","text","placeholder","Search...",1,"border","border-status-gray"],["ngbDropdown","",1,"dropdown"],["id","formDropdownMenuButton","type","button","data-toggle","dropdown","ngbDropdownToggle","",1,"btn","btn-secondary","dropdown-toggle","bg-white","text-black"],["ngbDropdownMenu","","aria-labelledby","formDropdownMenuButton",1,"dropdown-menu"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],["id","statusDropdownMenuButton","type","button","data-toggle","dropdown","ngbDropdownToggle","",1,"btn","btn-secondary","dropdown-toggle","bg-white","text-black"],["ngbDropdownMenu","","aria-labelledby","statusDropdownMenuButton",1,"dropdown-menu"],[1,"input-group","date-picker-container"],["type","button",1,"btn","btn-outline-status-gray","bi","bi-calendar3","btn-date-picker",3,"click"],["placeholder","dd/mm/yyy","name","dp","ngbDatepicker","",1,"border","border-status-gray","date-picker",3,"ngModel","ngModelChange"],["d","ngbDatepicker"],[1,"d-flex","justify-content-between","align-items-center"],["role","group",1,"btn-group","border","border-status-grey"],["type","button",1,"btn",3,"routerLink","ngClass"],[1,"export",3,"click"],[1,"text-white","icon-paper-download"],[1,"text-blue-nav"],[1,"dropdown-item",3,"click"]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"h1",0),t._uU(1,"Submissions"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3),t._UZ(5,"img",4)(6,"input",5),t.qZA(),t.TgZ(7,"div",6)(8,"button",7),t._uU(9),t.qZA(),t.TgZ(10,"div",8),t.YNc(11,ye,2,1,"a",9),t.qZA()(),t.TgZ(12,"div",6)(13,"button",10),t._uU(14),t.qZA(),t.TgZ(15,"div",11),t.YNc(16,be,2,1,"a",9),t.qZA()(),t.TgZ(17,"div",12)(18,"button",13),t.NdJ("click",function(){t.CHM(a);const l=t.MAs(20);return t.KtG(l.toggle())}),t.qZA(),t.TgZ(19,"input",14,15),t.NdJ("ngModelChange",function(l){return i.date=l}),t.qZA()()(),t.TgZ(21,"div",16)(22,"div",17)(23,"button",18),t._uU(24,"Map "),t.qZA(),t.TgZ(25,"button",18),t._uU(26,"List "),t.qZA()(),t.TgZ(27,"div",19),t.NdJ("click",function(){return i.export()}),t._UZ(28,"i",20),t.TgZ(29,"span",21),t._uU(30,"Export"),t.qZA()()()(),t._UZ(31,"router-outlet")}2&e&&(t.xp6(9),t.hij(" ",i.selectedForm," "),t.xp6(2),t.Q6J("ngForOf",i.forms),t.xp6(3),t.hij(" ",i.selectedStatus," "),t.xp6(2),t.Q6J("ngForOf",i.statuses),t.xp6(3),t.Q6J("ngModel",i.date),t.xp6(4),t.Q6J("routerLink","/submissions/map")("ngClass",t.VKq(9,F,"map"===i.currentTab)),t.xp6(2),t.Q6J("routerLink","/submissions/list")("ngClass",t.VKq(11,F,"list"===i.currentTab)))},dependencies:[_.mk,_.sg,b.jt,b.iD,b.Vi,b.J4,O.Fj,O.JJ,O.On,C.lC,C.rH],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.filter[_ngcontent-%COMP%]{margin-bottom:34px}.btn-group[_ngcontent-%COMP%]{margin-right:27.5px}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:15px 26px;font-family:Roboto Regular;font-style:normal;font-weight:400;font-size:16px;line-height:130%}.btn-date-picker[_ngcontent-%COMP%]{border-right:0;padding:13px 20px;border-top-left-radius:4px;border-bottom-left-radius:4px}.date-picker-container[_ngcontent-%COMP%]{flex-wrap:nowrap}.date-picker[_ngcontent-%COMP%]{border-left:0!important;border-top-right-radius:4px;border-bottom-right-radius:4px;outline:none!important}.dropdown[_ngcontent-%COMP%]{border-radius:4px;border:1px solid var(--bs-status-gray);margin-right:40px}.dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{font-family:Roboto Regular;font-style:normal;font-weight:400;font-size:16px;line-height:130%;padding:12.5px 16px;display:flex;justify-content:space-between;width:209px}.dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{content:url(arrow-down.6b5d0e2a92c3aba4.svg);border:0;vertical-align:0}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%], .export[_ngcontent-%COMP%]{cursor:pointer}.export[_ngcontent-%COMP%]   .icon-paper-download[_ngcontent-%COMP%]{font-size:17px;margin-right:8px}.export[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Roboto Medium;font-style:normal;font-weight:500;font-size:16px;line-height:130%}.search[_ngcontent-%COMP%]{position:relative;margin-right:40px}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:48px;width:334px;text-indent:32px;padding:14px 18px;border-radius:4px;font-family:Roboto Regular;font-style:normal;font-weight:400;font-size:16px;line-height:130%;outline:none}.search[_ngcontent-%COMP%]   .icon-search[_ngcontent-%COMP%]{position:absolute;top:14px;left:18px;width:20px;height:20px}"]}),n})();function ve(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"input",2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"div",14),t._UZ(7,"span",15),t.TgZ(8,"span"),t._uU(9),t.qZA()()(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA()()),2&n){const e=s.$implicit,i=t.oxw();t.xp6(4),t.Oqu(e.task),t.xp6(2),t.Q6J("ngClass",i.getStatusClass(e.status)),t.xp6(1),t.Q6J("ngClass",i.getStatusMarkClass(e.status)),t.xp6(2),t.Oqu(e.status),t.xp6(2),t.Oqu(e.from),t.xp6(2),t.Oqu(e.to),t.xp6(2),t.Oqu(e.customerAddress),t.xp6(2),t.Oqu(e.dueDate)}}function ze(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"li",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.loadPage(0))}),t.TgZ(1,"a",17),t._uU(2,"1"),t.qZA()()}}function we(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"li",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.loadPage(1))}),t.TgZ(1,"a",17),t._uU(2,"2"),t.qZA()()}}function ke(n,s){1&n&&(t.TgZ(0,"li",6)(1,"a",17),t._uU(2,"..."),t.qZA()())}function Oe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"li",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.loadPage(a.currentPage-1))}),t.TgZ(1,"a",17),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.currentPage)}}function Ie(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"li",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.loadPage(a.currentPage+1))}),t.TgZ(1,"a",17),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.currentPage+2)}}function xe(n,s){1&n&&(t.TgZ(0,"li",6)(1,"a",17),t._uU(2,"..."),t.qZA()())}function Pe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"li",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.loadPage(a.pageLimit-2))}),t.TgZ(1,"a",17),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.pageLimit-1)}}function Le(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"li",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.loadPage(a.pageLimit-1))}),t.TgZ(1,"a",17),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.pageLimit)}}const U=function(n){return{disabled:n}};let De=(()=>{class n{constructor(e){this.submissionsService=e,this.listData=[],this.currentPage=0,this.limit=10,this.amount=0,this.loadPage(this.currentPage),this.submissionsService.getSubmissionsAmount().subscribe(i=>this.amount=i)}getStatusClass(e){return this.submissionsService.getStatusClass(e)}getStatusMarkClass(e){return this.submissionsService.getStatusMarkClass(e)}loadPage(e){this.currentPage=e,this.submissionsService.getSubmissions(this.currentPage,this.limit).subscribe(i=>{this.listData=i})}get numberOfElements(){return`${this.currentPage*this.limit+1}-${Math.min((this.currentPage+1)*this.limit,this.amount)}`}get pageLimit(){return Math.ceil(this.amount/this.limit)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(P))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],decls:44,vars:18,consts:[[1,"table"],["scope","col"],["type","checkbox","value","",1,"form-check-input"],[4,"ngFor","ngForOf"],[1,"d-flex","pagination-container","justify-content-between","align-items-center"],[1,"pagination"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"ngClass","click"],["aria-hidden","true",1,"previous"],["class","page-item",3,"click",4,"ngIf"],["class","page-item",4,"ngIf"],[1,"page-link","current-page","active-link"],["aria-label","Next",1,"page-link",3,"ngClass","click"],["aria-hidden","true",1,"next"],[1,"status","border",3,"ngClass"],[1,"status-mark",3,"ngClass"],[1,"page-item",3,"click"],[1,"page-link"]],template:function(e,i){1&e&&(t.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),t._UZ(4,"input",2),t.qZA(),t.TgZ(5,"th",1),t._uU(6,"Task"),t.qZA(),t.TgZ(7,"th",1),t._uU(8,"Status"),t.qZA(),t.TgZ(9,"th",1),t._uU(10,"From"),t.qZA(),t.TgZ(11,"th",1),t._uU(12,"To"),t.qZA(),t.TgZ(13,"th",1),t._uU(14,"Customer Address"),t.qZA(),t.TgZ(15,"th",1),t._uU(16,"Due Date"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,ve,18,8,"tr",3),t.qZA()(),t.TgZ(19,"div",4)(20,"div"),t._uU(21),t.qZA(),t.TgZ(22,"div")(23,"nav")(24,"ul",5)(25,"li",6)(26,"a",7),t.NdJ("click",function(){return i.currentPage>0?i.loadPage(i.currentPage-1):null}),t._UZ(27,"span",8),t.qZA()(),t.YNc(28,ze,3,0,"li",9),t.YNc(29,we,3,0,"li",9),t._UZ(30,"li",6),t.YNc(31,ke,3,0,"li",10),t.YNc(32,Oe,3,1,"li",9),t.TgZ(33,"li")(34,"a",11),t._uU(35),t.qZA()(),t.YNc(36,Ie,3,1,"li",9),t.YNc(37,xe,3,0,"li",10),t.YNc(38,Pe,3,1,"li",9),t._UZ(39,"li",6),t.YNc(40,Le,3,1,"li",9),t.TgZ(41,"li",6)(42,"a",12),t.NdJ("click",function(){return i.currentPage<i.pageLimit?i.loadPage(i.currentPage+1):null}),t._UZ(43,"span",13),t.qZA()()()()()()),2&e&&(t.xp6(18),t.Q6J("ngForOf",i.listData),t.xp6(3),t.AsE("",i.numberOfElements," of ",i.amount," submissions"),t.xp6(5),t.Q6J("ngClass",t.VKq(14,U,i.currentPage<1)),t.xp6(2),t.Q6J("ngIf",0!==i.currentPage),t.xp6(1),t.Q6J("ngIf",i.currentPage>1&&i.currentPage<3),t.xp6(2),t.Q6J("ngIf",i.currentPage>2),t.xp6(1),t.Q6J("ngIf",i.currentPage<i.pageLimit&&i.currentPage>2),t.xp6(3),t.Oqu(i.currentPage+1),t.xp6(1),t.Q6J("ngIf",i.currentPage+2<i.pageLimit),t.xp6(1),t.Q6J("ngIf",i.currentPage+3<i.pageLimit-1),t.xp6(1),t.Q6J("ngIf",i.currentPage+1<i.pageLimit-1&&i.currentPage+3<i.pageLimit),t.xp6(2),t.Q6J("ngIf",i.currentPage+1<i.pageLimit),t.xp6(2),t.Q6J("ngClass",t.VKq(16,U,i.currentPage+1===i.pageLimit)))},dependencies:[_.mk,_.sg,_.O5],styles:[".table[_ngcontent-%COMP%]{border:1px solid #ECECED;box-shadow:0 2px 10px #060c1b1a;border-radius:8px;margin-bottom:36.5px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-family:Roboto Bold;font-style:normal;font-weight:700;font-size:16px;line-height:140%;padding-left:16px;padding-top:16px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-family:Roboto Regular;font-style:normal;font-weight:400;font-size:16px;line-height:130%;vertical-align:middle;padding-left:16px}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{visibility:hidden}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{visibility:visible}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{visibility:visible}.table[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{border:1px solid #B8B9BC;border-radius:2px;width:24px;height:24px;margin:0}.pagination-container[_ngcontent-%COMP%]{font-family:Roboto Regular;font-style:normal;font-weight:400;font-size:16px;line-height:130%}.pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{margin-right:8px;border:1px solid var(--bs-status-gray);color:var(--bs-black);border-radius:4px;cursor:pointer}.pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-link.active-link[_ngcontent-%COMP%]{border:1px solid var(--bs-blue-nav);color:var(--bs-blue-nav)}.pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-link.disabled[_ngcontent-%COMP%]{background-color:var(--bs-status-gray-bg)}.pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .previous[_ngcontent-%COMP%]:before{content:url(arrow-left.53c9dec26154e535.svg);display:inline-block;vertical-align:middle;line-height:normal}.pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .next[_ngcontent-%COMP%]:before{content:url(arrow-right.4f18827b941816d4.svg);display:inline-block;vertical-align:middle;line-height:normal}"]}),n})();function Ee(n,s){if(1&n&&(t.TgZ(0,"div",4)(1,"div",5)(2,"div",6),t._uU(3),t.qZA(),t.TgZ(4,"div",7)(5,"span",8),t._uU(6,"From:"),t.qZA(),t.TgZ(7,"span",9),t._uU(8),t.qZA()(),t.TgZ(9,"div",7)(10,"span",8),t._uU(11,"To:"),t.qZA(),t.TgZ(12,"span",9),t._uU(13),t.qZA()(),t.TgZ(14,"div")(15,"span",8),t._uU(16,"Due Date:"),t.qZA(),t.TgZ(17,"span",10),t._uU(18),t.qZA()()(),t.TgZ(19,"div")(20,"span",11),t._UZ(21,"span",12),t.TgZ(22,"span"),t._uU(23),t.qZA()()()()),2&n){const e=s.$implicit,i=t.oxw();t.xp6(3),t.hij(" ",e.customerAddress," "),t.xp6(5),t.Oqu(e.from),t.xp6(5),t.Oqu(e.to),t.xp6(5),t.Oqu(e.dueDate),t.xp6(2),t.Q6J("ngClass",i.getStatusClass(e.status)),t.xp6(1),t.Q6J("ngClass",i.getStatusMarkClass(e.status)),t.xp6(2),t.Oqu(e.status)}}function Te(n,s){if(1&n&&t._UZ(0,"map-marker",16),2&n){const e=s.$implicit,i=t.oxw(2);t.Q6J("position",e)("options",i.markerOptions)}}function Ze(n,s){if(1&n&&(t.TgZ(0,"div",13)(1,"google-map",14),t.YNc(2,Te,1,2,"map-marker",15),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("center",e.markerPositions[0]),t.xp6(1),t.Q6J("ngForOf",e.markerPositions)}}let Se=(()=>{class n{constructor(e,i,a){this.submissionsService=e,this.cdRef=i,this.geocoder=a,this.isApiLoaded=!1,this.mapSize=null,this.listData=[],this.currentPage=0,this.limit=10,this.markerOptions={draggable:!1,icon:"../assets/icons/marker.png"},this.markerPositions=[]}ngOnInit(){this.submissionsService.googleApiLoaded().subscribe(e=>{this.isApiLoaded=e,this.cdRef.detectChanges()}),this.submissionsService.getSubmissions(this.currentPage,this.limit).pipe((0,E.w)(e=>{this.listData=e;const i=this.listData.map(a=>this.geocoder.geocode({address:a.customerAddress}));return(0,y.a)(i)}),(0,u.U)(e=>e.map(i=>i?.results[0]?.geometry?.location)),(0,u.U)(e=>e.map(i=>({lat:i?.lat(),lng:i?.lng()})))).subscribe(e=>{this.markerPositions=e.filter(i=>!!i.lat&&!!i.lng)})}getStatusClass(e){return this.submissionsService.getStatusClass(e)}getStatusMarkClass(e){return this.submissionsService.getStatusMarkClass(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(P),t.Y36(t.sBO),t.Y36(me))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-map"]],decls:4,vars:2,consts:[[1,"row","submissions-wrapper"],[1,"submissions-list","col-4"],["class","submission border border-status-grey d-flex justify-content-between",4,"ngFor","ngForOf"],["class","col-8 map-content",4,"ngIf"],[1,"submission","border","border-status-grey","d-flex","justify-content-between"],[1,"submission-data"],[1,"address","row-info"],[1,"row-info"],[1,"label","text-status-gray"],[1,"email"],[1,"date","text-status-red"],[1,"status","border",3,"ngClass"],[1,"status-mark",3,"ngClass"],[1,"col-8","map-content"],["width","100%","height","100%",3,"center"],[3,"position","options",4,"ngFor","ngForOf"],[3,"position","options"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,Ee,24,7,"div",2),t.qZA(),t.YNc(3,Ze,3,2,"div",3),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngForOf",i.listData),t.xp6(1),t.Q6J("ngIf",i.isApiLoaded))},dependencies:[_.mk,_.sg,_.O5,c,x],styles:["[_nghost-%COMP%]{display:flex;flex-grow:1;flex-direction:column}.submissions-wrapper[_ngcontent-%COMP%]{display:flex;flex-grow:1;margin-right:-40px}.submissions-wrapper[_ngcontent-%COMP%]   .submissions-list[_ngcontent-%COMP%]{max-height:650px;overflow-y:auto}.submissions-wrapper[_ngcontent-%COMP%]   .submission[_ngcontent-%COMP%]{padding:16px;border-radius:4px;max-width:450px;margin-bottom:8px;overflow-y:auto}.submissions-wrapper[_ngcontent-%COMP%]   .submission[_ngcontent-%COMP%]   .submission-data[_ngcontent-%COMP%]{max-width:270px}.submissions-wrapper[_ngcontent-%COMP%]   .submission[_ngcontent-%COMP%]   .submission-data[_ngcontent-%COMP%]   .row-info[_ngcontent-%COMP%]{margin-bottom:8px}.submissions-wrapper[_ngcontent-%COMP%]   .submission[_ngcontent-%COMP%]   .submission-data[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{font-family:Roboto Bold;font-style:normal;font-weight:700;font-size:18px;line-height:140%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.submissions-wrapper[_ngcontent-%COMP%]   .submission[_ngcontent-%COMP%]   .submission-data[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-family:Roboto Medium;font-style:normal;font-weight:500;font-size:16px;line-height:130%;margin-right:8px}.submissions-wrapper[_ngcontent-%COMP%]   .submission[_ngcontent-%COMP%]   .submission-data[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{font-family:Roboto Regular;font-style:normal;font-weight:400;font-size:16px;line-height:130%}.submissions-wrapper[_ngcontent-%COMP%]   .submission[_ngcontent-%COMP%]   .submission-data[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-family:Roboto Medium;font-style:normal;font-weight:500;font-size:16px;line-height:130%}.submissions-wrapper[_ngcontent-%COMP%]   .map-content[_ngcontent-%COMP%]{padding-right:0}"]}),n})(),Ae=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.ez,ue,b.XC,b.M,b._A,O.u5,C.Bz.forChild([{path:"",component:Ce,children:[{path:"list",component:De},{path:"map",component:Se},{path:"",redirectTo:"list",pathMatch:"full"}]}])]}),n})()}}]);